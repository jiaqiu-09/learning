<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="text">hello right click test</div>
  <ul id="menu" style="position: absolute; visibility: hidden; background-color: silver;">
    <li>a</li>
    <li>b</li>
  </ul>
  <input placeholder="sth"/>
  <script>
    window.addEventListener('load', function() {
      let text = document.getElementById('text')
      text.addEventListener('contextmenu', function(e) {
        e.preventDefault()

        let menu = document.getElementById('menu')
        menu.style.visibility = 'visible'
        menu.style.top = e.clientY + 'px'
        menu.style.left = e.clientX + 'px'
      })
    })
    document.addEventListener('click', function() {
      let menu = document.getElementById('menu')
      menu.style.visibility = 'hidden'
    })

    // window.addEventListener('beforeunload', function(e) {
    //   let msg = 'Really ?'
    //   (e || window.event).returnValue = msg
    //   return false
    // })

    window.addEventListener('beforeunload', (event) => {
      // Cancel the event as stated by the standard.
      event.preventDefault();
      // Chrome requires returnValue to be set.
      event.returnValue = '';
    });

    // window.onbeforeunload = function(e) {
    //   // let msg = 'Really ?'
    //   // (e || window.event).returnValue = msg
    //   e.preventDefault()
    //   return 'Are you sure you want to leave this page?  You will lose any unsaved data.';
    // }
  </script>
</body>
</html>